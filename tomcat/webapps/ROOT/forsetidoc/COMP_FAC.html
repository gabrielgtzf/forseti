<!DOCTYPE HTML>
<html>
<head>
<title>Forseti GNU</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
TD,P,B,INPUT,DIV{font-family: Arial, "Apple Chancery", "DejaVu Sans Mono", monospace; font-size:12pt}
.txtMenu{
	padding:4px;
	font-size:12pt;
	font-weight:normal;
	color:white;
	font-style: normal;
	text-decoration: none;
}
.txtSubMenu{
	padding:4px;
	font-size:12pt;
	font-weight:bold;
	font-style: normal;
	text-decoration: none;
}
.txtPag{
	padding:4px;
	font-size:12pt;
	font-weight:normal;
	font-style: normal;
	text-decoration: none;
}
.txtEnlTit{
	padding:4px;
	font-size:14pt;
	font-weight:bold;
	font-style: normal;
	text-decoration: none;
}
.txtTitLight{
	padding:4px;
	font-size:16pt;
	font-weight:lighter;
	font-style: normal;
	text-decoration: none;
}
.txtEnl{
	padding:4px;
	font-size:10pt;
	font-weight:normal;
	font-style: normal;
}
.txtTit{
	padding:4px;
	font-size:16pt;
	font-weight:bold;
	font-style: normal;
	text-decoration: none;
}
.txtImp{
	padding:4px;
	font-size:12pt;
	font-weight:lighter;
	font-style: normal;
	text-decoration: none;
}
.txtPie{
	padding:4px;
	font-size:9pt;
	font-weight:normal;
	color:#FFFFFF;
	font-style: normal;
	
}

.txtTec{
	padding:4px;
	font-size:10pt;
	font-weight:normal;
	color:#FFFFFF;
	font-style: normal;
	text-decoration: none;
	
}
</style>
<script type="text/javascript"> //<![CDATA[ 
var tlJsHost = ((window.location.protocol == "https:") ? "https://secure.comodo.com/" : "http://www.trustlogo.com/");
document.write(unescape("%3Cscript src='" + tlJsHost + "trustlogo/javascript/trustlogo.js' type='text/javascript'%3E%3C/script%3E"));
//]]>
</script>
</head>
<body bgcolor="#FFFFFF" leftmargin="0" topmargin="0" rightmargin="0" bottommargin="0" marginwidth="0" marginheight="0">
<div align="center">
  <table width="100%" border="0" cellpadding="0" cellspacing="0" bgcolor="#FFFFFF">
    <tr> 
      <td height="20" align="right" valign="middle" bgcolor="#CCCCCC" class="txtTec"> 
        <a href="index.html" target="_self" class="txtTec">Inicio</a> | <a href="DONACIONES.html" target="_self" class="txtTec">Donaciones</a> 
        | <a href="SOF.html" target="_self" class="txtTec">Contacto</a></td>
    </tr>
    <tr> 
      <td class="txtEnlTit"><table width="100%" border="0" cellspacing="5" cellpadding="0">
          <tr>
            <td width="100" align="center"><img src="../forsetidoc/IMG/logo_forseti.jpg" width="90" height="80"></td>
            <td align="right"><img src="../forsetidoc/IMG/el-erp-gratuito-para-pymes.gif" width="700" height="80"></td>
          </tr>
        </table>
        
      </td>
    </tr>
    <tr> 
      <td>
          <table width="100%"  border="0" cellspacing="0" cellpadding="0">
            <tr> 
			
              <td height="30" align="center" valign="middle" bgcolor="#999999"><a class="txtMenu" href="010001.html" target="_self">Generalidades</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#888888"><a class="txtMenu" href="020101.html" target="_self">Implantaci&oacute;n</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#999999"><a class="txtMenu" href="030101.html" target="_self">Interfaz</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#FF6600"><a class="txtMenu" href="040101.html" target="_self">SAF</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#0099FF"><a class="txtMenu" href="050101.html" target="_self">CEF</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#FFCC00"><a class="txtMenu" href="060101.html" target="_self">REF</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#339933"><a class="txtMenu" href="070101.html" target="_self">SOF</a></td>
			

              <td height="30" align="center" valign="middle" bgcolor="#888888"><a class="txtMenu" href="080101.html" target="_self">Anexos</a></td>
			

             
               </tr>
			   <tr>
			    <td height="10">&nbsp;</td>
			   </tr>
          </table>
      </td>
    </tr>
    <tr> 
      <td>
	  
	    <table width="100%" border="0" cellspacing="0" cellpadding="0">
          <tr>
			<td width="150" valign="top"> 
              <table width="100%" border="0" cellspacing="0" cellpadding="2">
                 
              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#0099FF">-</font></td>
                    <td valign="top"><a href="050101.html" class="txtSubMenu" target="_self"><font color="#0099FF">Introducción</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#0099FF">-</font></td>
                    <td valign="top"><a href="050201.html" class="txtSubMenu" target="_self"><font color="#0099FF">Contabilidad</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#0099FF">-</font></td>
                    <td valign="top"><a href="050301.html" class="txtSubMenu" target="_self"><font color="#0099FF">Cajas y Bancos</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#0099FF">-</font></td>
                    <td valign="top"><a href="050401.html" class="txtSubMenu" target="_self"><font color="#0099FF">Catálogos</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#0099FF">-</font></td>
                    <td valign="top"><a href="050501.html" class="txtSubMenu" target="_self"><font color="#0099FF">Almac&eacute;n</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#0099FF">-</font></td>
                    <td valign="top"><a href="050601.html" class="txtSubMenu" target="_self"><font color="#0099FF">Compras</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#0099FF">-</font></td>
                    <td valign="top"><a href="050701.html" class="txtSubMenu" target="_self"><font color="#0099FF">Ventas</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#0099FF">-</font></td>
                    <td valign="top"><a href="050801.html" class="txtSubMenu" target="_self"><font color="#0099FF">Producci&oacute;n</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#0099FF">-</font></td>
                    <td valign="top"><a href="050901.html" class="txtSubMenu" target="_self"><font color="#0099FF">Nómina</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#0099FF">-</font></td>
                    <td valign="top"><a href="051001.html" class="txtSubMenu" target="_self"><font color="#0099FF">Centro de Control</font></a></td>
				 </tr>
				 

              	 <tr>
				 	<td width="5" valign="top" class="txtSubMenu"><font color="#0099FF">-</font></td>
                    <td valign="top"><a href="051101.html" class="txtSubMenu" target="_self"><font color="#0099FF">Reportes</font></a></td>
				 </tr>
				 

				</table>
				
              <table width="100%" border="0" cellspacing="0" cellpadding="0">
                <tr> 
                  <td><br>
                    Motores del proyecto Forseti<br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/gnulinux.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/postgresql.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/openjdk.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/tomcat.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/openssl.gif" width="150" height="50"><br>
                    <img src="../forsetidoc/IMG/hor_caja.gif" width="150" height="15"><br>
                    <img src="../forsetidoc/IMG/rsync.gif" width="150" height="50"></td>
                </tr>
              </table>
			</td>
			<td valign="top">
				<table width="100%" border="0" cellspacing="0" cellpadding="10">
				  
				  <tr>
					<td class="txtTit" align="center"><font color="#0099FF">Compras</font></td>
				  </tr>
				  <tr>
					<td> 
                    
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				
 
				

<p>En forseti, el módulo de compras funciona para registrar las compras de materias primas que utiliza la empresa para posteriormente venderlas o transformarlas en productos terminados. Su estructura es idéntica a las ordenes y recepciones, por lo tanto se 
pueden generar automáticamente desde una orden o una recepción, o 
directamente en este módulo. Al ingresar una compra directamente en este módulo o indirectamente desde el módulo de órdenes de compra, se generará de 
manera automática el movimiento al almacén, en caso de ser a crédito su cuenta por pagar, o
 en el caso de ser de contado, su movimiento de caja o banco, y todo lo 
anterior con sus respectivas pólizas (si es que esta entidad de compra 
se enlaza a la contabilidad). Las compras generadas desde el módulo de recepciones, se saltarán la parte del almacén ya que esta entrada quedó debidamente registrada en el momento de ingresar la recepción.<br />
</p>En el panel izquierdo, veremos las fichas de las entidades de
 compra que dimos de alta previamente a través del módulo de Entidades 
del 

Centro de Control. Siempre aparecerán por defecto las compras 
de la primera entidad 

disponible.<br />

<div align="justify">

<br />

En el panel inferior, vamos a ver las siguientes fichas:<ul>
 <li>

<strong>Especial</strong>. La ficha de especial, permite filtrar las compras de cierto mes específico, que no aparezca como meses.</li>
 <li>

<strong>Hoy</strong>. Filtra y muestra solo las compras de hoy (esta es la selección por defecto).</li>
 <li>

<strong>Semana</strong>. Filtra y muestra las compras pertenecientes a los últimos siete días.</li>
 <li>

<strong>Meses... </strong>Esta ficha filtra y muestra las compras del mes seleccionado.</li>
</ul>

</div>
<p align="justify">En el panel derecho veremos las siguientes fichas pertenecientes al Estatus de la compra:<br />

</p>

<div align="justify">

<ul>
 <li>

<strong>Todas.</strong> Muestra compras con cualquier estatus, ya sea que estén generadas, canceladas, emitidas o revertidas.</li>
 <li>

<strong>Generadas.</strong> Muestra las compras que fueron 
recientemente generadas directamente en este módulo o a través del módulo de órdenes de compra, pero su movimiento al almacén asociado aún no cuenta con la aprobación del 
encargado de la bodega, este último no ha auditado la entrada al almacén. Las compras generadas desde recepciones nunca tomarán este estatus ya que la asociación del movimiento al almacén enlaza directamente al módulo de recepciones. <br />
</li>
 <li>

<strong>Canceladas.</strong> Esta ficha muestra aquellas compras que
 se han cancelado. Las compras canceladas ya no se pueden recuperar.</li>
 <li>
<strong>Emitidas.</strong> Muestra las compras, donde su 
movimiento al almacén asociado ya fue 
aprobado por el encargado de la bodega, osea, ya está auditada la entrada. <strong>NOTA:</strong> En caso de que la compra haya sido generada desde el módulo de recepciones, tendrá este estatus sin importar si el movimiento al almacén asociado a la recepción esté, o no este auditado.<br />
</li>
 <li>
<strong>Revertidas.</strong> Muestra las compras donde su movimiento
 al almacén asociado fue revertido por alguna circunstancia, por el 
encargado de esta bodega. Las compras generadas desde una recepción no se pueden revertir ya que no se asocian con ningún movimiento al almacén. <strong>NOTA IMPORTANTE:</strong> Las compras revertidas forzosamente tienen que ser canceladas.<br />
</li>
</ul>Las columnas por defecto que muestra el panel de cuerpo principal de este módulo son la siguientes:<br />

<ul>
 <li>

<strong>Núm</strong>. Es el número consecutivo de la compra, según la entidad a la que pertenece. <br />

</li>
 <li>

<strong>Fecha</strong>. Indica la fecha de la compra.</li>
 <li>

<strong>Ref. </strong>Esta es una referencia de la compra. Por lo regular
 se presenta en este campo un número que identifique la factura de nuestro proveedor. <br />

</li>
 <li>

<strong>ST.</strong> Muestra el estatus de la compra (Generada, Cancelada, Emitida o Revertida).</li>
 <li>

<strong>Total. </strong>Indica el importe total de esta compra. <br />

</li>
 <li>

<strong>Proveedor.</strong> Muestra el nombre del proveedor de nuestra compra.</li>
 <li>
<strong>Ref.</strong> Muestra la referencia del módulo auxiliar a manera de 
"Módulo|ID|Entidad||" que creó esta compra. Las compras generadas 
directamente en este módulo, no tienen ninguna referencia.</li>
 <li>
<strong>CFDI.</strong> Muestra el documento fiscal previamente cargado a forseti, que se ha enlazado a esta compra. Este puede ser uno de los siguientes:<br />
<ul>
 <li>
<strong>---.</strong> Ningún documento se ha enlazado.</li>
 <li>
<strong>PDF.</strong> Se ha enlazado tanto el archivo XML como el archivo PDF de una factura electrónica CFDI .</li>
 <li>
<strong>TFD.</strong> Solo se ha enlazado el archivo XML de la factura electrónica CFDI.<br />
</li>
 <li>
<strong>CBB.</strong> Se ha enlazado un comprobante fiscal impreso.</li>
 <li>
<strong>EXT.</strong> Se ha enlazado una factura extranjera.</li>
 <li>
<strong>MIX.</strong> Se han enlazado varios documentos a esta compra.<br />
</li>
</ul>
</li>
</ul>

<strong>NOTA:</strong> Las compras generadas o emitidas siempre aparecen en 

color negro, las revertidas en color azul, y todas las canceladas aparecen en color rojo.<br />

</div>

<h2 align="center">

<strong>Procesos del Módulo de Compras.</strong>

</h2>

<p align="justify">En el módulo de compras intervienen los procesos 

primarios de cargar xml y/o pdf, cargar cbb o factura extranjera, enlazar a compra, agregar, consultar, descargar archivo xml, descargar archivo pdf, devolver, rebajar, cancelar y rastreo.</p>
<p align="justify">
<strong>Cargar XML y/o PDF.</strong>
</p>
<p align="justify">Permite cargar a esta entidad de compra un archivo XML y su versión para impresión PDF de una factura electrónica, para poderla definir y/o enlazar a un registro en forseti a través del proceso "enlazar compra". Para saber los detalles de la carga, consulta la documentación del módulo de <a href="051006.html">CFDI y CE</a> del centro de control del CEF.</p>
<p align="justify">
<strong>Cargar CBB o Fac. Extranjera.<br />
</strong>
</p>
<p>Permite
 definir y cargar a esta entidad de compra, las bases y el archivo escaneado asociado de un comprobante impreso "cbb" o una factura extranjera, para poderla enlazar a un 
registro en forseti a través del proceso "enlazar compra". Para saber los detalles de la carga, consulta la documentación del módulo de <a href="051006.html">CFDI y CE</a> del centro de control del CEF.</p>
<strong>Agregar Compra.</strong><br />
<div align="justify">

<br />

Permite agregar nuevas compras desde cero. Las compras se agregan y se cargan los documentos según la entidad en la que estemos, 

por 

ejemplo, si tenemos la entidad de compra MATRIZ e IZTAPALAPA,

 y estamos en la entidad IZTAPALAPA, no podremos agregar o cargar el documento 

en la MATRIZ. Si deseamos hacer esto, Primero tendríamos que 

ubicarnos en la entidad de compra MATRIZ, para poder proseguir.

 El formulario para Agregar una nueva compra desde cero, posee los 

siguientes 

objetos de cabecero:<br />

<ul>
 <li>

<strong>No. Compra.</strong> Informativo, indica el número de compra que se agregará.</li>
 <li>

<strong>Referencia.</strong> Puedes ingresar algo pequeño que haga referencia a esta compra, por ejemplo, el número de factura del proveedor.</li>
 <li>

<strong>Fecha.</strong> Indica aquí la fecha de la compra.</li>
 <li>

<strong>Fecha de entrega.</strong> Es la fecha de entrega del material.<br />

</li>
 <li>

<strong>Pago.</strong> Este puede ser Contado o Crédito, e indica las 
condiciones de pago para esta compra. No se podrán agregar compras a crédito si el proveedor es el genérico (proveedor con el 
número cero). <br />

</li>
 <li>

<strong>Proveedor.</strong> Es la clave del proveedor para esta compra 
según el catálogo de proveedores establecido en 

el módulo de proveedores para esta entidad de compra. Este proveedor 
debe ser seleccionado antes de ingresar los detalles de la compra, ya que
 si se selecciona un nuevo proveedor después de haber ingresado alguna 
partida en el detalle, estas serán automáticamente eliminadas y se 
tendrán que volver a ingresar. Al agregar el número de proveedor, el 
sistema llenará los datos de este, estableciendo los siguientes datos 
informativos de la compra:<br />

<ul>
 <li>

<strong>R.F.C.</strong>

</li>
 <li>

<strong>Nombre.</strong> Es el nombre de la persona física o moral del proveedor.</li>
 <li>

<strong>Dirección.</strong>

</li>
 <li>

<strong>Colonia.</strong>

</li>
 <li>

<strong>Población.</strong>

</li>
 <li>

<strong>C.P.</strong>

</li>
 <li>

<strong>Tels.</strong> Los teléfonos de contacto. </li>
</ul>
<strong>NOTA IMPORTANTE:</strong> El proveedor por defecto número cero se usa regularmente para 
definir compras de contado hechas directamente en el mostrador y pagadas
 en efectivo o con cheque al portador, aunque con las últimas 
especificaciones de la contabilidad electrónica esto no debería quedar 
registrado de esta manera ya que tomará como beneficiario y rfc del pago
 al genérico. Este proveedor se usa mas comúnmente en compras donde la 
entidad de compra no está enlazada a la contabilidad y por lo tanto no 
genera registros de contabilidad electrónica.<br />

</li>
 <li>

<strong>Moneda.</strong> Indica aquí, la moneda de negociación para esta compra.</li>
 <li>

<strong>TC.</strong> Si la moneda de negociación está en moneda 
extranjera, debes indicar aquí el tipo de cambio. Este tipo de cambio 
será tomado al momento de generar el movimiento al almacén de esta 
compra para calcular el costo, y además, será utilizado para calcular la cuenta 
por pagar o el pago en caso de ser compra de contado. También se ocupará
 para las pólizas en caso de que la entidad de compra se enlace a la 
contabilidad.<br />
</li>
 <li>

<strong>Bodega.</strong> Campo informativo de la clave de la bodega en 
la cual se agregará el movimiento al almacén de esta compra.</li>
 <li>

<strong>Nombre.</strong> Campo informativo del nombre corto de esta bodega.</li>
 <li>

<strong>Observaciones del documento.</strong> Puedes ingresar aquí algunas observaciones sobre esta compra. <strong>NOTA:</strong> Este objeto se muestra en el pie del formulario.<br />

</li>
</ul>Para llenar los detalles de cada partida que contendrá la compra, contamos con los siguientes objetos:<br />

<ul>
 <li>

<strong>Cant.</strong> Indica la cantidad recibida del producto.</li>
 <li>

<strong>Uni.</strong> No contiene objeto. Este es un espacio 

informativo de partidas previamente insertadas, y muestra la unidad del producto según el catálogo de productos.</li>
 <li>

<strong>Clave.</strong> Aquí se inserta la clave del producto que 

contendrá esta partida, se puede seleccionar buscando en el catálogo, o 

si prefieres insertarla directamente. Aquí también puedes ingresar el 
código del proveedor en caso de que éste, este relacionado en el 
producto del catálogo de productos de forseti.<br />
</li>
 <li>

<strong>Descripción.</strong> Es informativo de la partida, es la descripción del producto y aparecerá cuando se ingrese la clave a partir del catálogo.</li>
 <li>

<strong>Precio.</strong> Si no se ingresa el precio, la partida se 
ingresará con el último costo del proveedor, o el último costo del 
producto (en caso de que no se haya comprado nunca a este proveedor), de
 lo contrario, este será el precio de compra.<br />
</li>
 <li>

<strong>Importe.</strong> No contiene objeto. Este es un espacio 

informativo de partidas previamente insertadas, y muestra el importe de 
la partida resultante de la cantidad multiplicada por el precio.</li>
 <li>

<strong>Desc.</strong> Si no se ingresa descuento, la partida buscará el
 descuento general de nuestro proveedor establecido en el catálogo de 
proveedores y en caso de que encuentre un descuento lo ingresará. Si se 
ingresa, éste descuento será aplicado a la partida.</li>
 <li>

<strong>IVA.</strong> Si no se ingresa IVA, procederá a revisar lo siguiente:<br />

<ol>
 <li>Si el producto aplica IVA, entonces se especificará el porcentaje según lo establecido en la entidad de compra. </li>
 <li>Si el producto no aplica IVA, entonces no especificará ningún IVA para esta partida.</li>
</ol>Si se ingresa un porcentaje directo de IVA, procederá como sigue: <br />

<ol>
 <li>Si el porcentaje de IVA en la entidad está marcado como 0% (por lo 
regular para entidades de compra no contables), entonces ignorará este 
dato y especificará el IVA en 0%. </li>
 <li>Si el porcentaje en la entidad es mayor que 0%, entonces aplicará este dato como porcentaje de IVA.&nbsp; </li>
</ol>

</li>
 <li>

<strong>IEPS.</strong> Si no se ingresa porcentaje de IEPS, la partida buscará el IEPS establecido

 en el catálogo de productos y en caso de que encuentre un porcentaje 

lo ingresará. Si se ingresa directamente, éste porcentaje de IEPS será aplicado a la partida.</li>
 <li>

<strong>R/IVA.</strong> Si no se ingresa porcentaje de retención de IVA,
 la partida buscará el porcentaje establecido

 en el catálogo de productos y en caso de que encuentre uno lo 
ingresará. Si se ingresa directamente, éste porcentaje de retención de 
IVA será aplicado a la partida.</li>
 <li>

<strong>R/ISR.</strong> Si no se ingresa porcentaje de retención del 
ISR, la partida buscará el porcentaje establecido

 en el catálogo de productos y en caso de que encuentre uno lo 
ingresará. Si se ingresa directamente, éste porcentaje de retención de 
ISR será aplicado a la partida.</li>
 <li>
<strong>Observaciones.</strong> Puedes ingresar aquí, algunas observaciones sobre esta partida de la compra.</li>
</ul>

</div>

<div align="justify">Al ir agregando cada partida a la compra, los datos de los impuestos IVA, IEPS, R/IVA y R/ISR aparecerán en el formato <strong>tasa:importe</strong>. Además irá cambiando la información de los totales, la cual establece los datos siguientes:<br />

<ul>
 <li>

<strong>Importe.</strong> Es la suma total del importe de los detalles.</li>
 <li>

<strong>Descuento.</strong> Es la suma total del descuento de los detalles.</li>
 <li>

<strong>Sub Total.</strong> Se calcula sumando el importe menos el descuento.</li>
 <li>

<strong>IVA.</strong> Es el total de IVA aplicado a esta compra.</li>
 <li>

<strong>IEPS.</strong> Es el total de IEPS aplicado a esta compra.<br />

</li>
 <li>

<strong>Retención de IVA.</strong> Es el total de retención de IVA.</li>
 <li>

<strong>Retención de ISR.</strong> Es el total de retención de ISR.</li>
 <li>

<strong>Total.</strong> Representa el gran total de la compra. Se calcula sumando el sub total más el IVA y el IEPS, menos las retenciones.</li>
</ul>

A continuación se muestra el camino que sigue el proceso al
 momento de aceptar la compra:<br />
<br />
<strong>A) Sobre el pago de contado.</strong> En caso de que las condiciones de pago se hayan establecido como "Contado", este proceso cargará el formulario para realizar el 
pago con una o varias entidades de caja y/o bancos y debes especificar los datos necesarios de los mismos según lo 
establecido en el módulo de caja y bancos en el apartado de <a href="050306.html">agregado indirecto de movimientos</a>.
 Según sea la moneda establecida en la compra, los movimientos de retiro se podrán realizar bajo las 
siguientes reglas:<br />
<ol>
 <li>Si la compra se registrará en moneda nacional, se podrá realizar el 
retiro desde una o varias cajas y/o bancos establecidos en moneda nacional.</li>
 <li>Si la compra se registrará en moneda extranjera, se podrá realizar el retiro
 desde una o varias caja y/o un bancos establecidos en moneda nacional. Se utilizará 
el tipo de cambio para que los movimientos de estas cajas y/o bancos queden 
establecidos en moneda nacional multiplicándolo por la cantidad.</li>
 <li>Si la compra se registrará en moneda extranjera, se podrá realizar el retiro
 desde una o varias cajas y/o bancos establecidos con la misma moneda extranjera. El tipo de 
cambio se utilizará exclusivamente para la póliza de egresos y en caso 
de que la entidad de compra esté enlazada a la contabilidad.</li>
 <li>Fallará si se intenta hacer el retiro de una compra en moneda 
nacional con bancos establecidos en moneda extranjera, o si la compra y los bancos están establecidos ambos en moneda extranjera, pero estas 
sean diferentes, por ejemplo, dolares con euros.</li>
 <li>Fallará si alguna entidad de caja o banco seleccionada para el pago tiene distintos trazos contables que la entidad de compra, por ejemplo, cuando la entidad de compra es contable y se intenta pagar con una cuenta personal que no enlaza a la contabilidad.</li>
 <li>En caso de éxito, se agregarán automáticamente el, o los movimientos de cada caja o banco seleccionados para el pago al módulo de cajas y/o de bancos respectivamente siguiendo las reglas de agregado de estos módulos.</li>
 <li>En caso de que las cajas o bancos estén enlazados a la contabilidad, se generará una sola póliza de egreso que estará ligada a cada movimiento de caja o banco involucrado, y a su vez se generarán los registros de contabilidad electrónica por cada uno. Estos pueden ser registros de cheques, transferencias y otros métodos de pago.<br />
</li>
</ol>
<strong>B) Sobre una compra a crédito.</strong> Cuando la compra se haya establecido como "Crédito", se agregará un nuevo registro de cuenta por pagar siguiendo las reglas del módulo de cuentas por pagar y la deuda con este proveedor se actualizará. En caso de que la entidad de compra esté enlazada a la contabilidad, se generará la póliza de diario de la compra de crédito.<br />
<br />
<strong>C) Sobre una compra sin ningún método de pago específico. </strong>Cuando
 la compra se haya
 establecido sin ningún método de pago, no se agregará ni movimiento de 
caja o banco, ni cuenta por pagar. En caso de que la entidad de compra 
esté enlazada a la contabilidad, se generará la póliza de diario de la 
compra a crédito con su partida doble a la cuenta especificada en la 
variable "CC_COMPNP - Cuenta para registros de partida doble en compras o gastos 
sin ningún tipo de pago, ni crédito, ni contado", establecida en el 
módulo de variables de la sección de compras del centro de control del 
CEF.&nbsp; <br />
<br />
<strong>D) Sobre el movimiento al almacén.</strong> El comportamiento para el movimiento de entrada al almacén dependerá de varios factores al momento de ingresar la compra:<br />
<ol>
 <li>Si la entidad de compra tiene seleccionada la opción "<strong>No manejar movimientos al almacén de 
productos o utensilios", </strong>no se agregará ningún movimiento al almacén al 
agregar esta compra.Esta opción se ha integrado al sistema en caso de que se requiera por algún motivo dar seguimiento al proceso de pago, sin alterar las existencias ni costos de almacén. Al no generar la entrada al almacén, tampoco generará la póliza del costo del producto aún cuando la entidad de compra si se enlace a la contabilidad, por lo tanto se deberá dar seguimiento manual a la entrada del material.</li>
 <li>Si la bodega asociada no se enlaza a la contabilidad, se creará el movimiento al almacén y las existencias y costos al nivel de este auxiliar se sincronizarán normalmente, sin embargo, no se ingresará ninguna póliza de costo lo cual dejará permanentemente desajustado el saldo del almacén al nivel de la balanza de comprobación, contra el saldo del almacén al nivel del auxiliar de esta bodega, por lo tanto se deberá dar seguimiento manual directamente en la contabilidad.</li>
 <li>Si la bodega asociada se enlaza a la contabilidad, se agregará la entrada del material y la póliza de costos, por lo tanto, el auxiliar de esta bodega como la balanza de comprobación estarán sincronizados en el saldo del inventario.</li>
 <li>Si la compra es generada a través de una recepción previamente capturada, no generará movimiento al almacén ni póliza de costos porque de eso ya se debió haber encargado el proceso de recepción. En este caso, solo se agregará el, o los movimientos de caja o banco junto a la póliza de egresos en (caso de que esta entidad se enlace a la contabilidad), y además, enlazará esta compra a la recepción.&nbsp; <br />
</li>
</ol>
<strong>Consultar Compra.</strong><br />

<br />
Este proceso permite consultar el cabecero y los detalles de la compra seleccionada.<br />
<br />
<strong>Enlazar a Compra.</strong><br />
<br />
Permite enlazar un CFDI, CBB o Factura 
extranjera previamente cargados a esta entidad, a un registro de compra 
en forseti. En el caso de CFDIs, permite construir a partir del archivo 
XML, una compra nueva la cual quedará registrada y enlazada a este. En 
caso de facturas CBB y extranjeras, el registro de la compra en forseti 
deberá hacerse forzosamente a través del proceso "Agregar Compra" y 
posteriormente proceder a enlazarlo con la factura previamente cargada.<br />
<br />
<strong>A) Enlace de CFDIs, CBBs y Facturas extranjeras a registros de compra previamente agregados a través del proceso "Agregar Compra".</strong> Enlazar un registro de compra en forseti con su archivo XML, PDF, CBB o Factura extranjera es tan sencillo como seleccionar el registro de compra, ejecutar este proceso, seleccionar el archivo deseado y dar aceptar, sin embargo, para que la transacción sea válida, tendrá que cumplir con las siguientes reglas:<br />
<ol>
 <li>La compra no debe estar cancelada ni tener ya un documento enlazado.</li>
 <li>El registro de compra en forseti solo se podrá enlazar a un solo documento, sea este un CFDI, CBB o Factura extranjera, y en caso de seleccionar dos o mas documentos, fallará la transacción.</li>
 <li>Es indispensable que el total en el documento coincida con el total en el registro de compra. Por ejemplo, no se podrá enlazar un documento con total de $1,000.00 a una compra con total de $1,001.00.</li>
 <li>Solo se podrán enlazar documentos CFDI si el tipo de documento es un ingreso y el RFC del emisor del XML es igual al RFC del proveedor forseti establecido en el catálogo de proveedores, por lo tanto, no se podrán enlazar documentos a compras de mostrador que llevan el proveedor "cero".</li>
</ol>
<strong>B) Enlace de CFDIs desde cero.</strong> Enlazar un documento a un registro de compra que se agregará a partir de este CFDI, es un proceso laborioso debido a la gran variedad y complejidad de los archivos XML de las facturas electrónicas. Para entender esto, debemos entender como está estructurado una factura electrónica. Nuevamente, esto se explica brevemente en la documentación del módulo de <a href="051006.html">CFDI y CE</a> del centro de control del CEF. Para agregar y enlazar un archivo a un nuevo registro, primeramente deberemos ejecutar este proceso sin tener ningún registro de compra seleccionado, esto abrirá el diálogo de archivos cargados y deberemos seleccionar un CFDI. Al aceptar nos cargará una plantilla de registro de compra conteniendo los conceptos del xml. Esta plantilla puede ser editada para que se ajuste a las cantidades y estándares del CFDI y poder agregarla como compra definitiva. Para la carga inicial de esta factura electrónica, verificará y seguirá las siguientes reglas:<br />
<ol>
 <li>Comprobará que solo se haya seleccionado un archivo XML, ya que en caso de haber seleccionado mas de uno fallará el enlace.</li>
 <li>El comprobante que se haya cargado deberá ser del tipo "ingreso" perteneciente a una factura electrónica, ya que los comprobantes de egreso o traslado pertenecientes a recibos de nómina o cartas porte, no se podrán enlazar a una compra. Esto lo revisa en el atributo tipoDeComprobante del elemento Comprobante.<br />
</li>
 <li>Comprobará que el atributo RFC del elemento Receptor en el XML sea el mismo que el de la compañía registrado en el módulo de CFDI y CE en la sección Emisor del Centro de control del CEF. Si no coinciden fallará.</li>
 <li>Verificará que el XML no maneje descuentos. Por el momento, la carga de compras no soportan descuentos porque en el CFDI no se especifica a que producto(s) aplica cada descuento, lo que hace imposible determinar un costo verdadero.<br />
</li>
</ol>En caso de que pase las pruebas previas, procederá a llenar el cabecero de la plantilla de la compra de la siguiente manera:<br />
<ul>
 <li>

<strong>No. Compra.</strong> Informativo, indica el número de compra que se agregará.</li>
 <li>

<strong>Referencia.</strong> Aparecerá por defecto la leyenda "s/r". Puedes sustituirla por algo pequeño que haga referencia a esta compra.</li>
 <li>

<strong>Fecha.</strong> Tomará la fecha del atributo fecha del elemento Comprobante.</li>
 <li>

<strong>Fecha de entrega.</strong> Igual que la fecha, tomará la fecha del atributo fecha del elemento Comprobante.

</li>
 <li>

<strong>Pago.</strong> Para determinar si es de crédito o contado, buscará la coincidencia del 
atributo RFC del elemento Emisor sobre el catálogo de proveedores en 
esta entidad de compra. En caso de coincidir, establecerá si es de 
crédito o contado según sus días de crédito. En caso de no existir en el catálogo se establecerá como contado. 

</li>
 <li>

<strong>Proveedor.</strong> Al igual que en el pago, buscará la coincidencia del 
atributo RFC del elemento Emisor sobre el catálogo de proveedores en 
esta entidad de compra. En caso de coincidir, establecerá el número de proveedor. En caso de no existir en el catálogo se establecerá el proveedor de mostrador número cero. El 
sistema llenará los datos de este, estableciendo los siguientes datos 
informativos de la compra:<br />

<ul>
 <li>

<strong>R.F.C.</strong> Será el del proveedor registrado en forseti o el RFC genérico en caso de que el proveedor sea el de mostrador.

</li>
 <li>

<strong>Nombre.</strong> Es el nombre de la persona física o moral del proveedor según el catálogo en forseti.</li>
 <li>

<strong>Dirección.</strong>

</li>
 <li>

<strong>Colonia.</strong>

</li>
 <li>

<strong>Población.</strong>

</li>
 <li>

<strong>C.P.</strong>

</li>
 <li>

<strong>Tels.</strong> </li>
</ul>


</li>
 <li>

<strong>Moneda.</strong> Para determinar la moneda, verificará el tipo de cambio según el atributo tipoDeCambio del elemento
 Comprobante, por ejemplo, si el tipo de
 cambio es diferente de 1.0, sabemos que está en moneda extranjera y
 le asignará a la plantilla la moneda 2 (moneda de dolares por defecto 
en forseti). <strong>NOTA IMPORTANTE:</strong> Aunque en el archivo xml existe un atributo 
Moneda del elemento Comprobante, no se toma en cuenta porque este 
atributo no maneja un estándar para expresar la moneda lo cual por 
ejemplo, para una moneda expresada en dólares, este atributo puede ser 
"dolar", "dollar","dolares","dolares americanos",etc., lo cual hace 
imposible que el sistema deduzca la moneda. En caso de que la moneda sea
 euros u otra diferente de dólares, ésta se tendrá que establecer 
manualmente ya que forseti le 
asignará la moneda número 2 "dolares" cuando encuentre el tipo de cambio 
diferente de 1.0. Si no existe este atributo, asignará la moneda local número 1 "pesos".<br />
</li>
 <li>

<strong>TC.</strong> Tomará el tipo de cambio según el atributo tipoDeCambio del elemento
 Comprobante. Si este atributo no existe, asignará un tipo de cambio de 1.0.
</li>
 <li>

<strong>Bodega.</strong> Campo informativo de la clave de la bodega en 
la cual se agregará el movimiento al almacén de esta compra.</li>
 <li>

<strong>Nombre.</strong> Campo informativo del nombre corto de esta bodega.</li>
 <li>

<strong>Observaciones del documento.</strong> Agregará la leyenda "Carga desde Factura Electrónica:" seguida del UUID del CFDI. <strong>NOTA:</strong> Este objeto se muestra en el pie del formulario.</li>
</ul>
<p>Ahora, procede a registrar cada concepto establecido en el elemento Conceptos del archivo xml. Estos los llenará de la siguiente manera:</p>
<ol>
 <li>Obtendrá la cantidad, precio, descripción e importe de la partida, sin aplicar iva, iva retenido o isr retenido ya que no aparecen estos datos en cada concepto del archivo xml.</li>
 <li>Para deducir la clave del producto se utilizará la descripción del concepto de este proveedor de la siguiente manera:<br />
<ol>
 <li>Buscará si esta descripción existe en la base de datos. Esta base se va actualizando con cada compra que se va enlazando a través de este mismo proceso.</li>
 <li>En caso de que haya una coincidencia, utilizará la clave del producto enlazada a esta descripción para asignarla como clave.</li>
 <li> En caso contrario, la clave se dejará en blanco y se necesitará ingresarla manualmente, al fin y al cabo, está quedará registrada para futuras compras.</li>
</ol>
</li>
 <li>Al terminar con todos los conceptos del archivo xml, procederá a revisar la concordancia de la compra contra el archivo y mostrará la plantilla de la compra con los mensajes de error que arroje esta revisión. <strong>NOTA:</strong> En caso de existir una concordancia sin errores, se podrá inmediatamente proceder a registrar la compra, lo cual además, quedará enlazada al archivo xml.<br />
</li>
</ol>
<strong>Determinando la concordancia</strong>...<br />
La concordancia es un proceso que se corre para determinar la igualdad en los importes y los impuestos de cada concepto del xml contra cada linea de detalle de la compra en forseti, y que a partir de esta, los totales del CFDI coincidan con los totales del registro de la compra. Para entender bien este proceso, vamos a revisarlo paso a paso. Supongamos que nuestro xml tiene el siguiente concepto e impuesto:<br />
<br />
<span style="color: rgb(0, 0, 255);">Concepto cantidad="35.00" descripcion="ISOCYT 2045" importe="133.00" unidad="KG" valorUnitario="3.800000"<br />
Traslado importe="21.28" impuesto="IVA" tasa="16.00"</span><br />
<br />
Suponiendo que el producto ISOCYT 2045 no se ha registrado en la base de datos de este proveedor, no se asociará con ningún producto del catálogo en forseti, por lo tanto, la revisión de la concordancia mostrará los siguientes mensajes: <br />
<br />
<span style="color: rgb(255, 255, 255); font-family: Arial, 'Apple Chancery', 'DejaVu Sans Mono', monospace; font-size: 13.3333330154419px; font-style: normal; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(204, 0, 0);">ERROR: Partida 1: La clave esta vacía, debes establecer una clave del catálogo</span><br style="color: rgb(255, 255, 255); font-family: Arial, 'Apple Chancery', 'DejaVu Sans Mono', monospace; font-size: 13.3333330154419px; font-style: normal; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(204, 0, 0);" />
<span style="color: rgb(255, 255, 255); font-family: Arial, 'Apple Chancery', 'DejaVu Sans Mono', monospace; font-size: 13.3333330154419px; font-style: normal; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(204, 0, 0);">Traslado 1 IVA en XML: Sin concordancia en Documento (16.0:21.28). Una clave en el catálogo no esta manejando el IVA, mientras que este XML si lo está haciendo</span><br style="color: rgb(255, 255, 255); font-family: Arial, 'Apple Chancery', 'DejaVu Sans Mono', monospace; font-size: 13.3333330154419px; font-style: normal; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(204, 0, 0);" />
<span style="color: rgb(255, 255, 255); font-family: Arial, 'Apple Chancery', 'DejaVu Sans Mono', monospace; font-size: 13.3333330154419px; font-style: normal; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(204, 0, 0);">Importes de IVA en el documento: 0 Importes de IVA en el XML: 1 Diferencia: -1</span><br style="color: rgb(255, 255, 255); font-family: Arial, 'Apple Chancery', 'DejaVu Sans Mono', monospace; font-size: 13.3333330154419px; font-style: normal; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(204, 0, 0);" />
<span style="color: rgb(255, 255, 255); font-family: Arial, 'Apple Chancery', 'DejaVu Sans Mono', monospace; font-size: 13.3333330154419px; font-style: normal; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(204, 0, 0);">PRECAUCION: Total de IVA en el documento: 0.0 Total de IVA en el XML: 21.28 Diferencia: -21.28</span><br style="color: rgb(255, 255, 255); font-family: Arial, 'Apple Chancery', 'DejaVu Sans Mono', monospace; font-size: 13.3333330154419px; font-style: normal; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(204, 0, 0);" />
<span style="color: rgb(255, 255, 255); font-family: Arial, 'Apple Chancery', 'DejaVu Sans Mono', monospace; font-size: 13.3333330154419px; font-style: normal; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(204, 0, 0);">ERROR: El total en el, o los CFDIs no corresponden al Total calculado en el registro a partir de estos registros. No se puede agregar. DOC: 133.0 XML, CBB o EXT: 154.28</span><br />
<br />
Como no se asoció a ninguna clave, marcará el error <span style="color: rgb(255, 255, 255); font-family: Arial, 'Apple Chancery', 'DejaVu Sans Mono', monospace; font-size: 13.3333330154419px; font-style: normal; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(204, 0, 0);">ERROR: Partida 1: La clave esta vacía, debes establecer una clave del catálogo</span> y además, el sistema no podrá determinar el iva ya que éste lo toma según lo establecido en el catálogo de productos y la entidad de compra, por lo tanto, el mensaje <span style="color: rgb(255, 255, 255); font-family: Arial, 'Apple Chancery', 'DejaVu Sans Mono', monospace; font-size: 13.3333330154419px; font-style: normal; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(204, 0, 0);">Traslado
 1 IVA en XML: Sin concordancia en Documento (16.0:21.28). Una clave en 
el catálogo no esta manejando el IVA, mientras que este XML si lo está 
haciendo</span>, nos está indicando que el primer traslado en el xml que pertenece al impuesto del iva por una tasa del 16% y un importe de 21.28, no tiene concordancia con ningún registro en la plantilla de la compra. Los siguientes mensajes indican estadísticas de esta concordancia, mientras que el último mensaje <span style="color: rgb(255, 255, 255); font-family: Arial, 'Apple Chancery', 'DejaVu Sans Mono', monospace; font-size: 13.3333330154419px; font-style: normal; font-variant: normal; font-weight: bold; letter-spacing: normal; line-height: normal; orphans: auto; text-align: -webkit-left; text-indent: 0px; text-transform: none; white-space: normal; widows: auto; word-spacing: 0px; -webkit-text-stroke-width: 0px; display: inline !important; float: none; background-color: rgb(204, 0, 0);">ERROR:
 El total en el, o los CFDIs no corresponden al Total calculado en el 
registro a partir de estos registros. No se puede agregar. DOC: 133.0 
XML, CBB o EXT: 154.28</span> nos indica que el total de la plantilla de la compra es diferente al total del archivo xml. Como podemos darnos cuenta, la concordancia marca mensajes de "ERROR" y otro tipo de mensajes. Los mensajes marcados como de error son indispensables de corregir para que la plantilla de la compra se pueda agregar.<br />
<br />
Para resolver el problema anterior, solo debemos establecer manualmente la clave del producto al que asociaremos ISOCYT 2045 y presionar el botón actualizar, suponiendo que nuestro producto aplica el IVA y nuestra entidad de compra está establecida con un IVA de 16%. Al actualizar, correrá el proceso de la concordancia la cual determinará el iva de nuestro producto y lo comparará con el traslado que al final de cuentas, será el mismo, y por lo tanto, los totales de la plantilla de la compra y del CFDI serán ambos por 154.28.<br />
<br />
Al aceptar, se agregará la compra de igual manera que el proceso "Agregar Compra". También se agregará a la base de datos del proveedor la asociación de nuestras claves, con la clave o descripción de cada concepto del CFDI, definiendo así, futuras cargas del mismo producto. Finalmente, se asociará la compra con el CFDI.<br />
<br />
Existen ocasiones como sucede con las facturas de combustible, donde sabemos que se genera un impuesto IEPS, pero en el xml no se muestra explícitamente, y por lo tanto, el proceso de concordancia parecerá fallar indefinidamente. Analicemos un archivo xml de gasolina:<br />
<br />
<span style="color: rgb(0, 0, 255);">Comprobante subTotal="3486.92" total="4026.92" ..............<br />
Concepto cantidad="239.98" unidad="LITRO" noIdentificacion="95" descripcion="32011.MAGNA" valorUnitario="11.7491" importe="2819.54"<br />
Concepto cantidad="53.53" unidad="LITRO" noIdentificacion="97" descripcion="32012.PREMIUM" valorUnitario="12.4674" importe="667.38"<br />
<br />
Impuestos totalImpuestosTrasladados="539.99"<br />
Traslado impuesto="IVA" importe="436.64" tasa="16.00"</span><br />
<span style="color: rgb(0, 0, 255);">Traslado impuesto="IVA" importe="103.35" tasa="16.00"</span><br />
<br />
Aquí, el xml indica un subtotal de 3486.92 perteneciente a la suma de los importes de los conceptos por 2819.54 mas 667.38, lo cual es correcto, sin embargo, al agregar el 16% de iva, este debería quedar en 557.91 lo cual no coincide con el iva en el xml por 539.99. Desgraciadamente y debido a la poca o nada estandarización de los xml que se explica en la documentación del módulo de <a href="051006.html">CFDI y CE</a> del centro de control del CEF, podemos deducir, que el valor unitario lleva incluido el impuesto IEPS, y esto solo porque sabemos que los combustibles lo manejan. En estas circunstancias, y suponiendo que nuestras claves de materia prima de combustible están establecidas en aplicar el IVA, entonces nuestra compra se establecería de la siguiente manera:<br />
<div align="center"><br />
</div>
<table %"="" align="center" border="1" cellpadding="0" cellspacing="0">
  <tbody>
 <tr> 
    <td>
<strong>Cant</strong>
</td>
    <td>
<strong>Clave</strong>
</td>
    <td>
<span style="color: rgb(102, 102, 102);">
<strong>Descripción</strong>
</span>
</td>
    <td>
<strong>Precio</strong>
</td>
    <td>
<span style="color: rgb(102, 102, 102);">
<strong>Importe</strong>
</span>
</td>
    <td>
<strong>IVA</strong>
</td>
    <td>
<strong>IEPS</strong>
</td>
  </tr>
  <tr> 
    <td>239.98</td>
    <td>MAGNA</td>
    <td>
<span style="color: rgb(102, 102, 102);">GASOLINA MAGNA</span>
</td>
    <td>11.7491</td>
    <td>
<span style="color: rgb(102, 102, 102);">2819.55</span>
</td>
    <td>16:451.13</td>
    <td>0:00</td>
  </tr>
  <tr> 
    <td>53.53</td>
    <td>PREMIUM</td>
    <td>
<span style="color: rgb(102, 102, 102);">GASOLINA PREMIUM</span>
</td>
    <td>12.4674</td>
    <td>
<span style="color: rgb(102, 102, 102);">667.38</span>
</td>
    <td>16:106.78</td>
    <td>0:00</td>
  </tr>
  <tr> 
    <td colspan="5" align="right">
<strong>Importe</strong>
</td>
    <td colspan="2" align="right">3486.93</td>
  </tr>
  <tr> 
    <td colspan="5" align="right">
<strong>Sub total</strong>
</td>
    <td colspan="2" align="right">3486.93</td>
  </tr>
  <tr> 
    <td colspan="5" align="right">
<strong>IVA</strong>
</td>
    <td colspan="2" align="right">557.91</td>
  </tr>
  <tr> 
    <td colspan="5" align="right">
<strong>IEPS</strong>
</td>
    <td colspan="2" align="right">0.00</td>
  </tr>
  <tr> 
    <td colspan="5" align="right">
<strong>Total</strong>
</td>
    <td colspan="2" align="right">4044.84</td>
  </tr>
</tbody>
</table>
<div align="center"><br />
</div>La columna IVA nos indica el iva aplicado a la partida de manera <strong>tasa:importe</strong> lo cual no coincide con los traslados del CFDI y por lo tanto, fallará la concordancia. Si establecemos el IVA manualmente sobre cada partida de la plantilla con 436.64 y 103.35 y actualizamos, la concordancia sería correcta, sin embargo, esta solución nos arrojaría un IVA del 15.486159 lo cual nos indica que el precio ya lleva incluido el impuesto IEPS. En caso de aceptar, la póliza de la compra quedará registrada sin la especificación del IEPS. Para solucionar este caso en particular, se debería recalcular el costo de cada partida para que al importe se le pueda aplicar manualmente el IVA y el IEPS para que quedara de la siguiente manera:<br />
<div align="center"><br />
</div>
<table align="center" border="1" cellpadding="0" cellspacing="0">
  <tbody>
 <tr> 
    <td>
<strong>Cant</strong>
</td>
    <td>
<strong>Clave</strong>
</td>
    <td>
<span style="color: rgb(102, 102, 102);">
<strong>Descripción</strong>
</span>
</td>
    <td>
<strong>Precio</strong>
</td>
    <td>
<span style="color: rgb(102, 102, 102);">
<strong>Importe</strong>
</span>
</td>
    <td>
<strong>IVA</strong>
</td>
    <td>
<strong>IEPS</strong>
</td>
  </tr>
  <tr> 
    <td>239.98</td>
    <td>MAGNA</td>
    <td>
<span style="color: rgb(102, 102, 102);">GASOLINA MAGNA</span>
</td>
    <td>11.3718</td>
    <td>
<span style="color: rgb(102, 102, 102);">2729.00</span><br />
</td>
    <td>16:436.64</td>
    <td>3.3181:90.55</td>
  </tr>
  <tr> 
    <td>53.53</td>
    <td>PREMIUM</td>
    <td>
<span style="color: rgb(102, 102, 102);">GASOLINA PREMIUM</span>
</td>
    <td>12.0668</td>
    <td>
<span style="color: rgb(102, 102, 102);">645.94</span>
</td>
    <td>16:103.35</td>
    <td>3.3192:21.44</td>
  </tr>
  <tr> 
    <td colspan="5" align="right">
<strong>Importe</strong>
</td>
    <td colspan="2" align="right">3374.94</td>
  </tr>
  <tr> 
    <td colspan="5" align="right">
<strong>Sub total</strong>
</td>
    <td colspan="2" align="right">3374.94</td>
  </tr>
  <tr> 
    <td colspan="5" align="right">
<strong>IVA</strong>
</td>
    <td colspan="2" align="right">539.99</td>
  </tr>
  <tr> 
    <td colspan="5" align="right">
<strong>IEPS</strong>
</td>
    <td colspan="2" align="right">111.99</td>
  </tr>
  <tr> 
    <td colspan="5" align="right">
<strong>Total</strong>
</td>
    <td colspan="2" align="right">4026.92</td>
  </tr>
</tbody>
</table>
<div align="center"><br />
</div>Aquí hemos cambiado los precios de cada partida lo cual nos calcula un importe menor al del xml, sin embargo, al aplicarle el 16% de IVA ya nos coincide con el IVA establecido en el xml, además, incluimos el IEPS de cada una para que los totales coincidan. Al final de esta solución el proceso de concordancia ya no arrojará mensajes de error ya que el total en el xml y en la plantilla de la compra coinciden y queda a tu criterio el agregar o no agregar la compra. Como podemos ver, esta solución es sumamente complicada debido a la falta de la estandarización del archivo XML, sin embargo, no todos los archivos xml se salen de la estandarización estipulada por el SAT, por lo tanto, la mayor parte de las compras cargadas desde facturas electrónicas pasarán el proceso de concordancia sin ningún problema. <br />
<br />
Para ajustar la plantilla de la compra y que ésta pase con éxito el proceso de concordancia, contamos con los siguientes objetos de formulario para cada partida:<br />
<ul>
 <li>

<strong>Cant.</strong> Indica la cantidad del producto establecida en el concepto del xml. Puede modificarse en caso necesario.<br />
</li>
 <li>

<strong>Uni.</strong> Si ya está definida la clave, muestra la unidad del producto según el catálogo de productos en forseti, de lo contrario, aparecerá vacía.<br />
</li>
 <li>

<strong>Clave.</strong> Aquí se inserta la clave del producto. En caso de que la clave o descripción en el concepto del XML ya tenga una asociación a un producto en la base de datos de este proveedor, se agregará la clave de este producto a este objeto, de lo contrario, esta clave aparecerá vacía. Este campo puede ser editado para ajustarse a otro producto diferente.<br />
</li>
 <li>

<strong>Descripción.</strong> Es informativo. Si no se ha definido la clave, marcará la descripción del proveedor, de lo contrario, marcará la descripción del producto en forseti.</li>
 <li>

<strong>Precio.</strong> Indica el precio del producto establecido en el concepto del xml. Puede modificarse para ajustarse al proceso de concordancia en caso necesario.</li>
 <li>

<strong>Importe.</strong>&nbsp; Indicará el importe resultante de la cantidad multiplicada por el precio. No se puede modificar ya que es simplemente informativo.<br />
</li>
 <li>

<strong>Desc.</strong> Siempre marcará 0.0 ya que los archivos xml con descuento no podrán cargarse ni tampoco podrá modificarse este campo manualmente.</li>
 <li>

<strong>IVA*.</strong> Si no existe asociación de productos marcará 0.0:0.0, de lo contrario, calculará inicialmente el IVA de la siguiente manera:<br />
<ol>
 <li>Si el producto aplica IVA, entonces se especificará tasa:importe según la tasa establecida en la entidad de compra.</li>
 <li>Si el producto no aplica IVA, entonces no especificará ningún IVA para esta partida y quedará como 0.0:0.0.</li>
</ol>
</li>
 <li>
<strong>IEPS*.</strong> Si no se ha definido la clave, marcará 0.0:0.0, de lo contrario, calculará inicialmente el  IEPS establecido

 en el catálogo de productos y en caso de que encuentre un porcentaje 

lo ingresará como tasa:importe.</li>
 <li>

<strong>R/IVA*.</strong> Si no se ha definido la clave, marcará 0.0:0.0, de lo contrario, calculará inicialmente el IVA retenido establecido

 en el catálogo de productos y en caso de que encuentre un porcentaje 

lo ingresará como tasa:importe.</li>
 <li>

<strong>R/ISR*.</strong> Si no se ha definido la clave, marcará 0.0:0.0, de lo contrario, calculará inicialmente la retención de ISR establecida

 en el catálogo de productos y en caso de que encuentre un porcentaje 

lo ingresará como tasa:importe.</li>
 <li>
<strong>Observaciones.</strong> Puedes ingresar aquí, algunas observaciones sobre esta partida de la compra.</li>
</ul>* Los campos de IVA, IEPS, Retención de IVA y Retención de ISR siempre aparecen con un formato de "tasa:importe", por ejemplo, si la partida tiene un importe de $1,000.00, el IVA aparecerá como 16.0:160.00 correspondientes a la tasa del 16% y el importe de $160.00. Estos campos pueden modificarse de dos maneras distintas:<br />
<ul>
 <li>Suponiendo que queremos modificar el IVA aplicando otra tasa, podemos sustituir toda la información del campo del IVA por la tasa que deseamos aplicar marcándola con el signo de porcentaje al final, por ejemplo, sustituyendo "16.0:160.00" por "12%", el IVA nos cambiará a 12:120 al actualizar la plantilla, y toda la compra se recalculará con los $120.00 en lugar de los $160.00.</li>
 <li>También podemos cambiar estos campos definiendo la cantidad del campo literalmente, por ejemplo, si sustituimos "16.0:160.00" por "140", el IVA nos cambiará a 14:140.</li>
</ul>Dentro de los errores mas comunes en la revisión de la concordancia encontramos los siguientes casos:<br />
<ol>
 <li>El ISPT no aparece como Traslado dentro del elemento Traslados del CFDI. Nuestro ejemplo anterior es una muestra clara de esta situación y se ve comúnmente en las facturas de gasolina.</li>
 <li>El CFDI contiene dos o mas conceptos que aplican la tasa del iva al 16% por ejemplo, sin embargo, solo existe un elemento Traslado dentro del elemento Traslados del CFDI conteniendo la suma total del IVA de todos los conceptos. Mientras las partidas de nuestra plantilla marquen la misma tasa de iva, la suma de estas coincidirá con el único traslado, y por lo tanto, no deberá afectar al total.<br />
</li>
 <li>
Los precios de los productos están mal dentro del CFDI, por lo tanto, el importe calculado en la plantilla a partir de la cantidad multiplicada por el precio no coincide con el importe del concepto, por ejemplo, un concepto <span style="color: rgb(0, 0, 255);">cantidad="10" valorUnitario="10.20" importe="102.30" </span>no coincidirá con el importe calculado en la plantilla por 102.00 ya que el valor unitario debería ser 10.23. La solución será cambiar el precio de la partida manualmente para que se ajuste. <br />
</li>
</ol>Al final de cuentas, ajustando la plantilla para que el total de la compra coincida con el del CFDI se podrá proceder a agregarla evitándonos la mayor parte de la captura, sobre todo, cuando ya lo hemos venido haciendo con regularidad y la base de datos de la asociación de claves del sistema contra la de los proveedores ya está alimentada.<br />
&nbsp;
<br />
<strong>Archivo XML</strong><br />
<br />
Permite descargar el archivo XML, de la factura electrónica de nuestro proveedor asociado a esta compra. <br />
<br />
<strong>Archivo PDF</strong><br />
<br />
Permite descargar el archivo PDF de la factura electrónica de nuestro proveedor asociado a esta compra en caso de existir. En caso de que se haya asociado a un registro de documento impreso CBB o
 a una factura extranjera EXT, se utilizará también este proceso para su
 descarga. <br />
<br />
<strong>Devolver y Rebajar Compra.</strong><br />
<div align="justify">

<br />

Estos procesos permiten generar una devolución o una rebaja sobre la compra seleccionada. Suponiendo que le devolvemos material a un proveedor, utilizaremos el proceso de devolución para sacar el material del almacén y disminuir nuestra deuda generando un saldo de la cuenta por pagar asociada a la compra o un depósito de caja o banco si fue realizada de contado. Si lo que deseamos es registrar una rebaja sobre algún material, utilizaremos el proceso de rebaja solo para disminuir nuestra deuda de igual manera que en una devolución.

 El formulario para Agregar una nueva devolución o rebaja sobe compra posee los 

siguientes 

objetos de cabecero:<br />

<ul>
 <li>

<strong>No. Nota de Crédito.</strong> Informativo, es el número para identificar esta devolución o rebaja en forseti.<br />
</li>
 <li>

<strong>Referencia.</strong> Puedes ingresar algo pequeño que haga referencia a esta devolución o rebaja, por ejemplo, el número de nota de crédito del proveedor.</li>
 <li>

<strong>Fecha.</strong> Indica aquí la fecha de la devolución o rebaja.</li>
 <li>

<strong>Fecha de entrega.</strong> Es la fecha de salida del material devuelto. En caso de rebaja, esta fecha puede ser la misma que la anterior.<br />

</li>
 <li>

<strong>Pago.</strong> Informativo, indica las 
condiciones de pago para esta devolución o rebaja según la compra. Básicamente, si la compra fue de contado, esperará un deposito a una caja o banco. Si fue a crédito, se espera la especificación del registro del saldo para la cuenta por pagar.<br />

</li>
 <li>

<strong>Proveedor.</strong> Dato informativo de la clave del proveedor establecida en la compra asociada. El 
sistema llenará los datos de este, estableciendo los siguientes campos:<br />

<ul>
 <li>

<strong>R.F.C.</strong>

</li>
 <li>

<strong>Nombre.</strong> Es el nombre de la persona física o moral del proveedor.</li>
 <li>

<strong>Dirección.</strong>

</li>
 <li>

<strong>Colonia.</strong>

</li>
 <li>

<strong>Población.</strong>

</li>
 <li>

<strong>C.P.</strong>

</li>
 <li>

<strong>Tels.</strong> Los teléfonos de contacto. </li>
</ul>
</li>
 <li>
<strong>Moneda.</strong> Es la moneda de negociación de la compra asociada. Esta misma moneda se utilizará para el registro de la devolución o rebaja.<br />
</li>
 <li>

<strong>TC.</strong> Si la moneda de negociación está en moneda 
extranjera, debes indicar aquí el tipo de cambio. Este tipo de cambio 
será tomado al momento de calcular la cuenta 
por pagar o el pago en caso de ser devolución o rebaja de contado. También se ocupará
 para las pólizas en caso de que la entidad de compra se enlace a la 
contabilidad.<br />
</li>
 <li>

<strong>Bodega.</strong> Campo informativo de la clave de la bodega en 
la cual se agregará el movimiento al almacén en caso de una devolución.</li>
 <li>

<strong>Nombre.</strong> Campo informativo del nombre corto de esta bodega.</li>
 <li>

<strong>Observaciones del documento.</strong> Puedes ingresar aquí algunas observaciones sobre esta devolución o rebaja. <strong>NOTA:</strong> Este objeto se muestra en el pie del formulario.<br />

</li>
</ul>El proceso de devolver o rebajar se realiza en sentido contrario al proceso de agregado. Por ejemplo, supongamos que tenemos la siguiente compra:<br />
<div align="center"><br />
</div>
<table align="center" border="1" cellpadding="0" cellspacing="0">
  <tbody>
    <tr> 
      <td> <strong>Cant</strong> </td>
      <td>
<strong>Uni</strong>
</td>
      <td> <strong>Clave</strong> </td>
      <td>  <strong>Descripción</strong> 
         </td>
      <td> <strong>Precio</strong> </td>
	  <td> <strong>Importe</strong> </td>
      <td>  <strong>Desc</strong> 
         </td>
      <td> <strong>IVA</strong> </td>
      <td> <strong>IEPS</strong> </td>
	  <td> <strong>R/IVA</strong> </td>
      <td> <strong>R/ISR</strong> </td>
    </tr>
    <tr> 
      <td>100</td>
      <td>PZA</td>
      <td>A</td>
      <td> Producto A </td>
      <td>11.50</td>
      <td> 1150.00 </td>
      <td>0.0</td>
	  <td>16:184</td>
      <td>0:0</td>
	  <td>0:0</td>
	  <td>0:0</td>
    </tr>
    <tr> 
      <td>200</td>
      <td>KG</td>
      <td>B</td>
      <td> Producto B </td>
      <td>10.00</td>
      <td> 2000.00 </td>
      <td>0.0</td>
	  <td>16:320</td>
      <td>0:0</td>
	  <td>0:0</td>
	  <td>0:0</td>
    </tr>
    <tr> 
      <td colspan="8" align="right"> <strong>Importe</strong> </td>
      <td colspan="3" align="right">3150.00</td>
    </tr>
	<tr> 
      <td colspan="8" align="right"> <strong>Descuento</strong> </td>
      <td colspan="3" align="right">0.00</td>
    </tr>
    <tr> 
      <td colspan="8" align="right"> <strong>Sub total</strong> </td>
      <td colspan="3" align="right">3150.00</td>
    </tr>
    <tr> 
      <td colspan="8" align="right"> <strong>IVA</strong> </td>
      <td colspan="3" align="right">504.00</td>
    </tr>
    <tr> 
      <td colspan="8" align="right">
<strong>IEPS</strong> </td>
      <td colspan="3" align="right">0.00</td>
    </tr>
	<tr> 
      <td colspan="8" align="right">
<strong>Retención IVA</strong> </td>
      <td colspan="3" align="right">0.00</td>
    </tr>
	<tr> 
      <td colspan="8" align="right">
<strong>Retención ISR</strong> </td>
      <td colspan="3" align="right">0.00</td>
    </tr>
    <tr> 
      <td colspan="8" align="right">
<strong>Total</strong> </td>
      <td colspan="3" align="right">3654.00</td>
    </tr>
  </tbody>
</table>
<div align="center"><br />
</div>Al cargar la devolución o rebaja, la plantilla para esta, se verá exactamente igual que la compra. En este caso, si no modificamos nada, toda la compra será devuelta o rebajada, osea que se generará una salida de almacén por las 100 piezas del producto A y los 200 kg del producto B, depositándose en la caja o banco si es de contado o, generándose el registro del saldo en caso de que se haya hecho a crédito, por el total $3,654.00. Si por ejemplo, deseamos devolver solo una parte del material, supongamos, solo 100 kg del producto B, nuestra devolución tendría que quedar de la siguiente manera:<br />
<div align="center"><br />
</div>
<table align="center" border="1" cellpadding="0" cellspacing="0">
  <tbody>
    <tr> 
      <td> <strong>Cant</strong> </td>
      <td>
<strong>Uni</strong>
</td>
      <td> <strong>Clave</strong> </td>
      <td>  <strong>Descripción</strong> 
         </td>
      <td> <strong>Precio</strong> </td>
	  <td> <strong>Importe</strong> </td>
      <td>  <strong>Desc</strong> 
         </td>
      <td> <strong>IVA</strong> </td>
      <td> <strong>IEPS</strong> </td>
	  <td> <strong>R/IVA</strong> </td>
      <td> <strong>R/ISR</strong> </td>
    </tr>
    
    <tr> 
      <td>100</td>
      <td>KG</td>
      <td>B</td>
      <td> Producto B </td>
      <td>10.00</td>
      <td> 1000.00 </td>
      <td>0.0</td>
	  <td>16:160</td>
      <td>0:0</td>
	  <td>0:0</td>
	  <td>0:0</td>
    </tr>
    <tr> 
      <td colspan="8" align="right"> <strong>Importe</strong> </td>
      <td colspan="3" align="right">1000.00</td>
    </tr>
	<tr> 
      <td colspan="8" align="right"> <strong>Descuento</strong> </td>
      <td colspan="3" align="right">0.00</td>
    </tr>
    <tr> 
      <td colspan="8" align="right"> <strong>Sub total</strong> </td>
      <td colspan="3" align="right">1000.00</td>
    </tr>
    <tr> 
      <td colspan="8" align="right"> <strong>IVA</strong> </td>
      <td colspan="3" align="right">160.00</td>
    </tr>
    <tr> 
      <td colspan="8" align="right">
<strong>IEPS</strong> </td>
      <td colspan="3" align="right">0.00</td>
    </tr>
	<tr> 
      <td colspan="8" align="right">
<strong>Retención IVA</strong> </td>
      <td colspan="3" align="right">0.00</td>
    </tr>
	<tr> 
      <td colspan="8" align="right">
<strong>Retención ISR</strong> </td>
      <td colspan="3" align="right">0.00</td>
    </tr>
    <tr> 
      <td colspan="8" align="right">
<strong>Total</strong> </td>
      <td colspan="3" align="right">1160.00</td>
    </tr>
  </tbody>
</table>
<div align="center"><br />
</div>En este caso eliminamos la partida del producto A ya que no queremos devolver nada de este producto, y cambiamos la cantidad del producto B a 100 KG, porque es la cantidad que deseamos devolver. Esto generará una salida de almacén por los 100 kg del producto B, depositándose en la caja o banco si es de 
contado o, generándose el registro del saldo en caso de que se haya 
hecho a crédito, por un total $1,160.00. Las rebajas funcionan de manera diferente, por ejemplo, suponiendo que nos harán una rebaja del 10% solo en el producto B, tendremos que modificar la plantilla de modo que quede de la siguiente manera:<br />
<div align="center"><br />
</div>
<table align="center" border="1" cellpadding="0" cellspacing="0">
  <tbody>
    <tr> 
      <td> <strong>Cant</strong> </td>
      <td>
<strong>Uni</strong>
</td>
      <td> <strong>Clave</strong> </td>
      <td>  <strong>Descripción</strong> 
         </td>
      <td> <strong>Precio</strong> </td>
	  <td> <strong>Importe</strong> </td>
      <td>  <strong>Desc</strong> 
         </td>
      <td> <strong>IVA</strong> </td>
      <td> <strong>IEPS</strong> </td>
	  <td> <strong>R/IVA</strong> </td>
      <td> <strong>R/ISR</strong> </td>
    </tr>
    
    <tr> 
      <td>200</td>
      <td>KG</td>
      <td>B</td>
      <td> Producto B </td>
      <td>1.00</td>
      <td> 200.00 </td>
      <td>0.0</td>
	  <td>16:32</td>
      <td>0:0</td>
	  <td>0:0</td>
	  <td>0:0</td>
    </tr>
    <tr> 
      <td colspan="8" align="right"> <strong>Importe</strong> </td>
      <td colspan="3" align="right">200.00</td>
    </tr>
	<tr> 
      <td colspan="8" align="right"> <strong>Descuento</strong> </td>
      <td colspan="3" align="right">0.00</td>
    </tr>
    <tr> 
      <td colspan="8" align="right"> <strong>Sub total</strong> </td>
      <td colspan="3" align="right">200.00</td>
    </tr>
    <tr> 
      <td colspan="8" align="right"> <strong>IVA</strong> </td>
      <td colspan="3" align="right">32.00</td>
    </tr>
    <tr> 
      <td colspan="8" align="right">
<strong>IEPS</strong> </td>
      <td colspan="3" align="right">0.00</td>
    </tr>
	<tr> 
      <td colspan="8" align="right">
<strong>Retención IVA</strong> </td>
      <td colspan="3" align="right">0.00</td>
    </tr>
	<tr> 
      <td colspan="8" align="right">
<strong>Retención ISR</strong> </td>
      <td colspan="3" align="right">0.00</td>
    </tr>
    <tr> 
      <td colspan="8" align="right">
<strong>Total</strong> </td>
      <td colspan="3" align="right">232.00</td>
    </tr>
  </tbody>
</table>
<div align="center"><br />
</div>En este caso también eliminamos la partida del producto A ya que no tenemos rebaja sobre este producto, y cambiamos la columna del precio del producto B a
 $1.00, porque pertenece al 10% de descuento sobre el precio original de $10.00. Esto generará la rebaja por un total de $232.00 depositándose en la 
caja o banco si es de 
contado o, generándose el registro del saldo en caso de que se haya 
hecho a crédito. <br />
<br />
Las devoluciones y rebajas se manipulan eliminando de la plantilla las partidas que no se desean rebajar o devolver, y editando las partidas que deseamos sean parte de nuestra devolución o rebaja utilizando los siguientes objetos del detalle:<br />

<ul>
 <li>

<strong>Cant.</strong> En caso de una devolución, debes indicar aquí la cantidad de producto a devolver. Esta no debe ser mayor a la cantidad de la compra asociada. En rebajas, esta cantidad no puede cambiar.</li>
 <li>

<strong>Uni.</strong> Es informativo de la unidad del producto.</li>
 <li>

<strong>Clave.</strong> Es informativo de la clave del producto.<br />
</li>
 <li>

<strong>Descripción.</strong> Es informativo de la descripción del producto.</li>
 <li>

<strong>Precio.</strong> En caso de una rebaja, debes indicar aquí el descuento unitario para este producto. Este no debe ser mayor al precio establecido en la compra asociada. En devoluciones, este precio no puede cambiar.
</li>
 <li>

<strong>Importe.</strong> No contiene objeto. Este es un espacio 

informativo de partidas previamente editadas, y muestra el importe que se nos devolverá o rebajará de este producto.<br />
</li>
 <li>

<strong>Desc.</strong> Muestra la proporción quitada del descuento en la compra.</li>
 <li>

<strong>IVA.</strong> Muestra la proporción quitada del IVA.

</li>
 <li>

<strong>IEPS.</strong> Muestra la proporción quitada del IEPS.</li>
 <li>

<strong>R/IVA.</strong> Muestra la proporción quitada de la retención de IVA.</li>
 <li>

<strong>R/ISR.</strong> Muestra la proporción quitada de la retención de ISR.</li>
 <li>
<strong>Observaciones.</strong> Puedes ingresar aquí, algunas observaciones sobre la devolución o rebaja que involucran a esta partida.<br />
</li>
</ul>

</div>

Al ir editando cada partida sobre la devolución o rebaja, los datos de la proporción quitada de impuestos IVA, IEPS, R/IVA y R/ISR aparecerán en el formato <strong>tasa:importe</strong>. Además irá cambiando la información de los totales, la cual establece los datos siguientes:<br />

<ul>
 <li>

<strong>Importe.</strong> Es la suma total del importe de los detalles.</li>
 <li>

<strong>Descuento.</strong> Es la suma total del descuento de los detalles.</li>
 <li>

<strong>Sub Total.</strong> Se calcula sumando el importe menos el descuento.</li>
 <li>

<strong>IVA.</strong> Es el total quitado de IVA de esta devolución o rebaja.</li>
 <li>

<strong>IEPS.</strong> Es el total quitado de IEPS de esta devolución o rebaja.<br />

</li>
 <li>

<strong>Retención de IVA.</strong> Es el total quitado de retención de IVA.</li>
 <li>

<strong>Retención de ISR.</strong> Es el total quitado de retención de ISR.</li>
 <li>

<strong>Total.</strong> Representa el gran total de la devolución o rebaja. Se calcula sumando el sub total más el IVA y el IEPS, menos las retenciones.</li>
</ul>

A continuación se muestra el camino que sigue el proceso al
 momento de aceptar la devolución o rebaja:<br />
<br />
<strong>A) Sobre el pago de contado.</strong> En caso de que las condiciones de 
pago de la compra se hayan establecido como "Contado", este proceso cargará el 
formulario para realizar el 
depósito con una o varias entidades de caja y/o bancos y debes especificar 
los datos necesarios de los mismos según lo 
establecido en el módulo de caja y bancos en el apartado de <a href="050306.html">agregado indirecto de movimientos</a>.
 Según sea la moneda establecida en la compra, los movimientos de depósito se podrán realizar bajo las 
siguientes reglas:<br />
<ol>
 <li>Si la devolución o rebaja se registrará en moneda nacional, se podrá realizar el 
depósito a una o varias cajas y/o bancos establecidos en moneda nacional.</li>
 <li>Si la devolución o rebaja se registrará en moneda extranjera, se podrá realizar el depósito
 a una o varias caja y/o un bancos establecidos en moneda nacional. Se utilizará 
el tipo de cambio para que los movimientos de estas cajas y/o bancos queden 
establecidos en moneda nacional multiplicándolo por la cantidad.</li>
 <li>Si la devolución o rebaja se registrará en moneda extranjera, se podrá realizar el depósito a una o varias cajas y/o bancos establecidos con la misma moneda extranjera. El tipo de 
cambio se utilizará exclusivamente para la póliza de ingresos y en caso 
de que la entidad de compra esté enlazada a la contabilidad.</li>
 <li>Fallará si se intenta hacer el depósito de una devolución o rebaja en moneda 
nacional con bancos establecidos en moneda extranjera, o si la devolución o rebaja y 
los bancos están establecidos ambos en moneda extranjera, pero estas 
sean diferentes, por ejemplo, dolares con euros.</li>
 <li>Fallará si alguna entidad de caja o banco seleccionada para el cobro
 tiene distintos trazos contables que la entidad de compra, por ejemplo,
 cuando la entidad de compra es contable y se intenta cobrar con una 
cuenta personal que no enlaza a la contabilidad.</li>
 <li>En caso de éxito, se agregarán automáticamente el, o los 
movimientos de cada caja o banco seleccionados para el cobro al módulo de
 cajas y/o de bancos respectivamente siguiendo las reglas de agregado de
 estos módulos.</li>
 <li>En caso de que las cajas o bancos estén enlazados a la 
contabilidad, se generará una sola póliza de ingreso que estará ligada a 
cada movimiento de caja o banco involucrado, y a su vez se generarán los
 registros de contabilidad electrónica por cada uno. Estos pueden ser 
registros de cheques, transferencias y otros métodos de pago.<br />
</li>
</ol>
<strong>B) Sobre una devolución o rebaja donde su compra fue realizada a crédito.</strong> Cuando la compra se haya 
establecido como "Crédito", se agregará un nuevo registro de saldo a la cuenta por 
pagar enlazada a la compra original siguiendo las reglas del módulo de cuentas por pagar y la deuda 
con este proveedor se actualizará. En caso de que la entidad de compra 
esté enlazada a la contabilidad, se generará la póliza de diario perteneciente a este saldo de cuenta.<br />
<br />
<strong>C) Sobre una devolución o rebaja donde su compra fue realizada sin ningún método de pago específico. </strong>Cuando
 la compra se haya
 establecido sin ningún método de pago, no se agregará ni movimiento de 
caja o banco, ni registro de saldo. En caso de que la entidad de compra 
esté enlazada a la contabilidad, se generará la póliza de diario de la 
devolución o rebaja a crédito con su partida doble a la cuenta especificada en la 
variable "CC_COMPNP - Cuenta para registros de partida doble en compras o gastos 
sin ningún tipo de pago, ni crédito, ni contado", establecida en el 
módulo de variables de la sección de compras del centro de control del 
CEF.&nbsp; <br />
<br />
<strong>D) Sobre el movimiento al almacén.</strong> Primero que nada debemos saber que las rebajas no generan movimientos al almacén. El comportamiento para el movimiento de salida dependerá de varios factores al momento de ingresar una devolución:<br />
<ol>
 <li>Si la entidad de compra tiene seleccionada la opción "<strong>No manejar movimientos al almacén de 
productos o utensilios", </strong>no se agregará ningún movimiento al almacén
 al 
agregar esta devolución. Al no generar la salida de almacén, tampoco generará la póliza de costos del producto aún cuando
 la entidad de compra si se enlace a la contabilidad, por lo tanto se 
deberá dar seguimiento manual a la salida del material.</li>
 <li>Si la bodega asociada no se enlaza a la contabilidad, se creará el 
movimiento al almacén y las existencias y costos al nivel de este 
auxiliar se sincronizarán normalmente, sin embargo, no se ingresará 
ninguna póliza de costo lo cual dejará permanentemente desajustado el 
saldo del almacén al nivel de la balanza de comprobación, contra el 
saldo del almacén al nivel del auxiliar de esta bodega, por lo tanto se 
deberá dar seguimiento manual directamente en la contabilidad.</li>
 <li>Si la bodega asociada se enlaza a la contabilidad, se agregará la 
salida del material y la póliza de costos, por lo tanto, el auxiliar de
 esta bodega como la balanza de comprobación estarán sincronizados en el
 saldo del inventario.</li>
 <li>Aunque la compra original haya sido generada a través de una recepción, la devolución si agregará la salida del almacén, obviamente si las reglas anteriores así lo indican.</li>
</ol>
<p>
<strong>NOTA:</strong> Una vez capturada una devolución o rebaja se le dará seguimiento en el módulo de Devoluciones sobre compras. Allí podremos consultar, asociar la nota de crédito, cancelar la devolución o rebaja, etc. <br />
</p>
<strong>Cancelar compra.</strong><br />
<br />
Este proceso cancela la compra seleccionada y aplicará las siguientes reglas:<br />
<ol>
 <li>En caso 
de que la compra haya sido generada desde una orden o una recepción, éstas quedarán liberadas de la asociación para poder generarse nuevamente.</li>
 <li>En compras de contado, cancelará los movimientos de caja o bancos asociados al pago.</li>
 <li>En compras a crédito, cancelará la cuenta por pagar asociada, siempre y cuando, no se hayan aplicado registros de pago, saldo, aplicación de anticipos, etc. a esta cuenta por pagar. En este caso, habrá que cancelar primero estos registros para que la compra junto a su cuenta por pagar puedan cancelarse.</li>
 <li>En compras generadas a través de una recepción, no quedará cancelado el movimiento al almacén ni la póliza de costos ya que este pertenece directamente a la recepción.</li>
 <li>Todas las pólizas asociadas directamente a esta compra, en caso de haberlas, quedarán canceladas.</li>
 <li>Todos los documentos fiscales enlazados a esta compra quedarán liberados para poderlos utilizar en otra compra.<br />
</li>
</ol>
<strong>Rastrear.</strong><br />

<br />

Permite hacer una consulta de la compra rastreando sus módulos dependientes.<br />

</div>

<h2 align="center">Errores comunes en los procesos del Módulo de Compras.</h2>

Los errores mas comunes en estos procesos son los siguientes:<br />

<ul>
 <li>

<strong>ERROR: No se puede subir ningun CFDI, CBB o Factura Extranjera porque esta entidad de compra o gasto está establecida como Fija.</strong>

 Solo se permite enlazar documentos fiscales a compras pertenecientes a entidades de compra enlazadas a la contabilidad, osea, que generen su registro de póliza de egresos o de diario según sea una compra de contado o de crédito.<br />
</li>
 <li>
<strong>ERROR: El tipo de comprobante fiscal digital CFDI, No corresponde con el tipo de documento a enlazar.</strong> Sucede por lo regular cuando se cargado al sistema un CFDI de traslado o de egreso como son cartas porte, notas de crédito del proveedor o algún recibo de nómina, y este se intenta enlazar a una compra.</li>
 <li>
<strong>ERROR: No se puede agregar la compra porque al pagarse de contado requiere que las cajas o bancos manejen los mismos trazos contables que la compra.</strong> Este error es común cuando agregamos una compra de contado donde la entidad de la compra se enlaza a la contabilidad, y la intentamos pagar con una caja o banco que no maneja la contabilidad. También ocurre si es al revés. Para que este error no suceda, necesitamos quitar el enlace de bancos o cajas  con distintos trazos contables al de la entidad, en la configuración de la entidad de compra. Así al seleccionar el pago se garantiza que tanto la entidad de compra como las cajas o bancos tengan los mismos trazos contables.&nbsp; <br />
</li>
 <li>
<strong>ERROR: La cuenta X, Y o Z no existe o no se ha enlazado.</strong> Este error es muy común en sistemas nuevos que se acaban de configurar y sucede cuando aún no se han especificado las variables de compras en la sección de compras del módulo de variables del centro de control del CEF. X, Y y Z representan en el mensaje de error, la descripción de la variable, ya que existen varias variables que deben ser especificadas. El sistema revisa por estas variables independientemente si se utilizarán o no, por ejemplo, aunque en la compra no exista un descuento, el sistema revisará el enlace de la variable para el descuento, y si no lo encuentra, fallará al agregarla. También es necesario especificar las variables aunque la entidad de compra no se enlace a la contabilidad. &nbsp; <br />
</li>
</ul>
			  

			  

			  

			  

			  

			  

			  

			  

			  

			  

			  

			  

			  

			  

			  

			  

			  

			  

			  

			  

                    </td>
				  </tr>
				  <tr>
					<td height="10">&nbsp;</td>
				  </tr>
				  

				</table>
			</td>
			<td width="220" valign="top"> 
              <table width="100%" border="0" cellspacing="0" cellpadding="2">
			    <tr>
				    
                  <td colspan="2">P&aacute;ginas en este tema:</td>
				 </tr>
                
				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#0099FF">-</font></td>     
                    <td valign="top"><a href="050601.html" class="txtPag" target="_self"><font color="#0099FF">Introducción</font></a><br><font color="#999999">Introducción al módulo de compras y gastos</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#0099FF">-</font></td>     
                    <td valign="top"><a href="050602.html" class="txtPag" target="_self"><font color="#0099FF">Proveedores</font></a><br><font color="#999999">Módulo de proveedores</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#0099FF">-</font></td>     
                    <td valign="top"><a href="050603.html" class="txtPag" target="_self"><font color="#0099FF">Cuentas por pagar</font></a><br><font color="#999999">Módulo de cuentas por pagar, anticipos, pagos, saldos, etc.</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#0099FF">-</font></td>     
                    <td valign="top"><a href="050604.html" class="txtPag" target="_self"><font color="#0099FF">Ordenes de compra</font></a><br><font color="#999999">Descripción del módulo de órdenes de compra</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#0099FF">-</font></td>     
                    <td valign="top"><a href="050605.html" class="txtPag" target="_self"><font color="#0099FF">Recepciones</font></a><br><font color="#999999">Documentación sobre el módulo de recpción de materiales.</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#0099FF">-</font></td>     
                    <td valign="top"><a href="050606.html" class="txtPag" target="_self"><font color="#0099FF">Compras</font></a><br><font color="#999999">Detalles del módulo de compras de materias primas.</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#0099FF">-</font></td>     
                    <td valign="top"><a href="050607.html" class="txtPag" target="_self"><font color="#0099FF">Devoluciones sobre compras</font></a><br><font color="#999999">Descripción del módulo de devoluciones y rebajas sobre compras</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#0099FF">-</font></td>     
                    <td valign="top"><a href="050608.html" class="txtPag" target="_self"><font color="#0099FF">Políticas de compra</font></a><br><font color="#999999">Detalles del módulo de políticas de compra.</font></td>
				 </tr>
				

				<tr>
				    <td width="5" valign="top" class="txtPag"><font color="#0099FF">-</font></td>     
                    <td valign="top"><a href="050609.html" class="txtPag" target="_self"><font color="#0099FF">Gastos</font></a><br><font color="#999999">Documentación del módulo de gastos</font></td>
				 </tr>
				

			    <tr>
			      <td colspan="2">
				<script language="JavaScript" type="text/javascript">
				  TrustLogo("http://forseti.org.mx/comodo_secure_113x59_white.png", "CL1", "none");
				</script>
				<a  href="https://www.positivessl.com/" id="comodoTL">Positive SSL</a>
			      </td>
			   </td>
			</table>
			
			</td>
		  </tr>
		</table>

	  
	  </td>
    </tr>
    <tr> 
      <td bgcolor="#999999" height="40" valign="bottom" class="txtPie"><a href="AGPL.html" target="_self" class="txtPie">Licencia Pública General de Affero (AGPL)</a> | <a href="acerca" target="_self" class="txtPie">Sobre 
        Forseti</a><br>
        Derechos Reservados &copy; 2014 - 2015 Organización Forseti A.C.
      </td>
    </tr>
  </table>
</div>
</body>
</html>

